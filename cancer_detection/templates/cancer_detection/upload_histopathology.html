{% extends 'base.html' %}

{% block title %}Upload Histopathology Report{% endblock %}

{% block content %}
<div class="fade-in max-w-5xl mx-auto">
    <div class="mb-8 sm:mb-12">
        <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-foreground mb-3">Upload Histopathology Report</h1>
        <p class="text-base sm:text-lg text-muted-foreground">Upload pathology reports for AI-powered analysis and extraction of key clinical information</p>
    </div>

    <div class="bg-card border border-border/50 rounded-2xl p-6 sm:p-10 transition-all">
        <form method="post" enctype="multipart/form-data" class="space-y-8">
            {% csrf_token %}
            
            <!-- Report Text Input -->
            <div>
                <label for="report_text" class="block text-sm sm:text-base font-semibold text-foreground mb-3">
                    <i class="fas fa-file-alt mr-2 text-primary"></i>Report Text
                </label>
                <textarea name="report_text" id="report_text" rows="15" 
                    class="w-full px-4 py-3 bg-background border border-input rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent text-foreground transition-all font-mono text-sm"
                    placeholder="Paste the pathology report text here...&#10;&#10;Example:&#10;DIAGNOSIS: Invasive ductal carcinoma, Grade 2&#10;TNM STAGING: T2N1M0 (Stage II)&#10;MARGINS: Negative&#10;LYMPH NODES: 2 of 15 positive&#10;BIOMARKERS: ER positive, PR positive, HER2 negative, Ki-67: 25%"></textarea>
                <p class="mt-2 text-xs sm:text-sm text-muted-foreground">Paste the full text of your pathology report for analysis</p>
            </div>

            <!-- OR Divider -->
            <div class="relative">
                <div class="absolute inset-0 flex items-center">
                    <div class="w-full border-t border-border"></div>
                </div>
                <div class="relative flex justify-center text-sm">
                    <span class="px-4 bg-card text-muted-foreground">OR</span>
                </div>
            </div>

            <!-- File Upload -->
            <div>
                <label for="report_file" class="block text-sm sm:text-base font-semibold text-foreground mb-3">
                    <i class="fas fa-file-upload mr-2 text-primary"></i>Upload Report File
                </label>
                <div class="mt-2 flex justify-center px-4 sm:px-6 pt-6 sm:pt-8 pb-6 sm:pb-8 border-2 border-dashed border-border rounded-xl hover:border-primary hover:bg-accent/20 transition-all duration-300 bg-accent/5 cursor-pointer group">
                    <div class="space-y-2 sm:space-y-3 text-center w-full">
                        <i class="fas fa-file-pdf text-5xl sm:text-6xl text-primary/40 group-hover:text-primary/60 mx-auto block mb-3 transition-colors"></i>
                        <div class="flex flex-col text-sm sm:text-base text-muted-foreground justify-center items-center">
                            <label for="report_file" class="relative cursor-pointer bg-primary/10 rounded-lg font-semibold text-primary hover:bg-primary/20 hover:text-primary/80 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary px-3 py-2 transition-all">
                                <span>Upload a file</span>
                                <input id="report_file" name="report_file" type="file" accept=".pdf,.txt,.doc,.docx,image/*" class="sr-only">
                            </label>
                            <p class="mt-2">or drag and drop</p>
                        </div>
                        <p class="text-xs text-muted-foreground/80">PDF, DOC, DOCX, TXT, or images up to 10MB</p>
                    </div>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="flex flex-col sm:flex-row gap-4 pt-4">
                <button type="submit" class="flex-1 bg-gradient-to-r from-primary to-primary/90 hover:shadow-xl text-primary-foreground font-bold py-3 sm:py-4 px-6 rounded-lg transition-all duration-300 flex items-center justify-center hover:scale-105">
                    <i class="fas fa-microscope mr-2"></i>
                    Analyze Report
                </button>
                <a href="{% url 'cancer_detection:dashboard' %}" class="bg-card border-2 border-border hover:border-primary text-foreground font-bold py-3 sm:py-4 px-6 rounded-lg transition-all duration-300 flex items-center justify-center">
                    <i class="fas fa-times mr-2"></i>
                    Cancel
                </a>
            </div>
        </form>
    </div>

    <!-- Information Box -->
    <div class="mt-8 bg-gradient-to-br from-blue-50 to-blue-50/50 dark:from-blue-900/20 dark:to-blue-900/10 border border-blue-200 dark:border-blue-800/50 rounded-xl p-6 sm:p-8">
        <h3 class="text-lg sm:text-xl font-bold text-blue-900 dark:text-blue-300 mb-4 flex items-center">
            <i class="fas fa-info-circle mr-2"></i>
            What We Extract
        </h3>
        <ul class="space-y-3 text-blue-800 dark:text-blue-200 text-sm sm:text-base">
            <li class="flex items-start">
                <i class="fas fa-check-circle text-blue-600 dark:text-blue-400 mr-3 mt-1 flex-shrink-0"></i>
                <span><strong>Cancer Type & Subtype:</strong> Identifies specific cancer type and histological subtype</span>
            </li>
            <li class="flex items-start">
                <i class="fas fa-check-circle text-blue-600 dark:text-blue-400 mr-3 mt-1 flex-shrink-0"></i>
                <span><strong>Grade & Stage:</strong> Extracts tumor grade (1-4) and TNM staging information</span>
            </li>
            <li class="flex items-start">
                <i class="fas fa-check-circle text-blue-600 dark:text-blue-400 mr-3 mt-1 flex-shrink-0"></i>
                <span><strong>Biomarkers:</strong> ER, PR, HER2, Ki-67, PD-L1, MSI status, and more</span>
            </li>
            <li class="flex items-start">
                <i class="fas fa-check-circle text-blue-600 dark:text-blue-400 mr-3 mt-1 flex-shrink-0"></i>
                <span><strong>Margin & Lymph Node Status:</strong> Surgical margins and lymph node involvement</span>
            </li>
            <li class="flex items-start">
                <i class="fas fa-check-circle text-blue-600 dark:text-blue-400 mr-3 mt-1 flex-shrink-0"></i>
                <span><strong>Additional Findings:</strong> LVI, PNI, necrosis, and other pathological features</span>
            </li>
        </ul>
    </div>
</div>
{% endblock %}

